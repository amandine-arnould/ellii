<div class="container mb-5 d-flex flex-column">
  <h1 class="mt-5 mb-5 text-center"><%= @activity.title %></h1>
  <% if @activity.user == current_user %>
    <% if current_user.status == "teacher" || current_user.status == "admin" %>
      <%= link_to "Modifier", edit_activity_path(@activity) %>
      <%= link_to "Supprimer", activity_path(@activity), method: :delete, data: { confirm: "Etes-vous sûr de vouloir supprimer #{@activity.title} ?"} %>
    <% end %>
  <% end %>
  <p>Description: <%= @activity.description %></p>
  <p>Durée: <%= @activity.duration %> min</p>
  <p>Lieu:
    <% if @activity.remote %>
      Chez moi
    <% else %>
      <%= @activity.address %>
    <% end %>
  </p>
  <p><%#= @activity.teacher.first_name %></p>
  <%# SESSIONS %>
  <h3>Créneaux disponibles</h3>
  <%= simple_form_for [ @booking ] do |f| %>
    <%= f.input :session_id, collection: Session.where(activity_id: @activity), prompt: "Choisir un créneau", label: false  %>
    <% if current_user.status == "teacher" %>
      <%= f.submit "Réserver", class: "btn btn-primary", disabled: true %>
    <% else %>
        <%= f.submit "Réserver", class: "btn btn-primary " %>
    <% end %>
  <% end %>
  <%# MAP %>
  <% if !@activity.remote %>
    <div id="map"
        class="mb-4 mt-3"
        style="width: 100%; height: 400px; border-radius: 5px; box-shadow: 0 0 15px rgba(0,0,0,0.1);"
        data-marker="<%= @marker.to_json %>"
        data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
    </div>
  <% end %>
</div>
